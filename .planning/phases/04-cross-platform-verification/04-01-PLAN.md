---
phase: 04-cross-platform-verification
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/http-transport.md
  - docs/claude-code-setup.md
  - docs/gemini-cli-setup.md
  - docs/antigravity-setup.md
autonomous: true
requirements:
  - DOCS-01
  - DOCS-02
  - DOCS-03
  - DOCS-04

must_haves:
  truths:
    - "A user can read docs/http-transport.md and know how to start the HTTP server with correct flags, port, and env vars"
    - "A user can read docs/claude-code-setup.md and replicate the stdio MCP config for Claude Code"
    - "A user can read docs/gemini-cli-setup.md and configure Gemini CLI to connect to the HTTP server"
    - "A user can read docs/antigravity-setup.md and configure Antigravity to connect to the HTTP server"
  artifacts:
    - path: "docs/http-transport.md"
      provides: "HTTP transport startup, port config, env var docs"
      min_lines: 30
    - path: "docs/claude-code-setup.md"
      provides: "Claude Code stdio setup guide"
      min_lines: 20
    - path: "docs/gemini-cli-setup.md"
      provides: "Gemini CLI HTTP setup guide"
      min_lines: 30
    - path: "docs/antigravity-setup.md"
      provides: "Antigravity HTTP setup guide"
      min_lines: 25
  key_links:
    - from: "docs/gemini-cli-setup.md"
      to: "docs/http-transport.md"
      via: "reference to starting the HTTP server"
      pattern: "http-transport"
    - from: "docs/antigravity-setup.md"
      to: "docs/http-transport.md"
      via: "reference to starting the HTTP server"
      pattern: "http-transport"
---

<objective>
Create setup documentation for all four MCP client platforms: HTTP transport usage, Claude Code (stdio), Gemini CLI (HTTP), and Antigravity (HTTP).

Purpose: Users need clear, self-contained guides to configure each platform. These docs serve as the reference for Phase 4 verification and future onboarding.
Output: Four markdown files in `docs/` directory.
</objective>

<execution_context>
@/home/sarturko/.claude/get-shit-done/workflows/execute-plan.md
@/home/sarturko/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-cross-platform-verification/04-RESEARCH.md
@src/server.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write HTTP transport and Claude Code setup docs</name>
  <files>docs/http-transport.md, docs/claude-code-setup.md</files>
  <action>
Create `docs/http-transport.md` covering DOCS-01:
- Title: "HTTP Transport"
- Section: "Starting the Server" with exact command: `python -m src.server --transport http`
- Section: "CLI Flags" documenting --transport, --port, --host with defaults and allowed values
- Section: "Environment Variables" documenting MCP_FORM_FILLER_TRANSPORT, MCP_FORM_FILLER_PORT, MCP_FORM_FILLER_HOST
- Section: "Examples" with common usage patterns (default, custom port, custom host+port)
- Section: "Endpoint" noting the MCP endpoint is at `/mcp` (i.e., `http://127.0.0.1:8000/mcp`)
- Note that the server binds to localhost only by default (no auth needed for local use)
- Reference `server.py` CLI help output and `_build_parser()` for exact flag names

Create `docs/claude-code-setup.md` covering DOCS-02:
- Title: "Claude Code Setup (stdio)"
- Section: "Configuration" showing the `.mcp.json` file at project root with exact content: `{"mcpServers": {"form-filler": {"command": ".venv/bin/python", "args": ["-m", "src.server"]}}}`
- Section: "Verification" explaining how to confirm tools are available (Claude Code automatically discovers tools from .mcp.json)
- Section: "Available Tools" listing all 7 tools by name
- Note that Claude Code uses stdio transport only (no HTTP config needed)
- Note this is the existing, working configuration from project setup
  </action>
  <verify>
Both files exist and have content:
```bash
test -s docs/http-transport.md && test -s docs/claude-code-setup.md && echo "OK"
```
Verify http-transport.md mentions --transport, --port, --host, and /mcp endpoint.
Verify claude-code-setup.md mentions .mcp.json and stdio.
  </verify>
  <done>docs/http-transport.md documents all CLI flags, env vars, and the /mcp endpoint. docs/claude-code-setup.md documents the .mcp.json stdio config with verification steps.</done>
</task>

<task type="auto">
  <name>Task 2: Write Gemini CLI and Antigravity setup docs</name>
  <files>docs/gemini-cli-setup.md, docs/antigravity-setup.md</files>
  <action>
Create `docs/gemini-cli-setup.md` covering DOCS-03:
- Title: "Gemini CLI Setup (HTTP)"
- Section: "Prerequisites" — Gemini CLI installed, HTTP server running (link to http-transport.md)
- Section: "Configuration" with TWO options:
  - Option A (CLI command): `gemini mcp add --transport http --trust form-filler-http http://127.0.0.1:8000/mcp`
  - Option B (manual edit): Edit `~/.gemini/settings.json`, add `"form-filler-http": {"httpUrl": "http://127.0.0.1:8000/mcp", "trust": true}` under `mcpServers`
- Section: "Verification" — start `gemini`, run `/mcp` command, expect to see form-filler-http CONNECTED with 7 tools
- Section: "Running the Pipeline" — include the test prompt from research (extract_structure_compact → validate_locations → build_insertion_xml → write_answers → verify_output with table_questionnaire.docx)
- IMPORTANT: Use `httpUrl` (NOT `url`) — `url` is for deprecated SSE transport
- IMPORTANT: Note that if both stdio and HTTP configs exist for the same server, tool names may be prefixed. Recommend disabling stdio with `gemini mcp disable form-filler` when testing HTTP.
- Section: "Troubleshooting" — server must be running first, use httpUrl not url, include /mcp in URL

Create `docs/antigravity-setup.md` covering DOCS-04:
- Title: "Antigravity Setup (HTTP)"
- Section: "Prerequisites" — Antigravity installed, HTTP server running (link to http-transport.md)
- Section: "Configuration" — Edit `~/.gemini/antigravity/mcp_config.json`, add `"form-filler-http": {"serverUrl": "http://127.0.0.1:8000/mcp"}` under `mcpServers`
- IMPORTANT: Use `serverUrl` (NOT `httpUrl` or `url`) — Antigravity uses a different key than Gemini CLI
- Section: "Verification" — Open Antigravity, click "..." menu in Agent panel, select "MCP Servers", confirm form-filler-http appears with tools listed
- Section: "Running the Pipeline" — same test prompt as Gemini CLI doc, adapted for Antigravity's agent interface
- Section: "Troubleshooting" — server must be running first, use serverUrl not httpUrl, include /mcp in URL, if tool calls stall restart Antigravity (known issue FastMCP #2489)
  </action>
  <verify>
Both files exist and have content:
```bash
test -s docs/gemini-cli-setup.md && test -s docs/antigravity-setup.md && echo "OK"
```
Verify gemini-cli-setup.md uses `httpUrl` (not `url`) and mentions `/mcp` endpoint.
Verify antigravity-setup.md uses `serverUrl` (not `httpUrl`) and mentions `/mcp` endpoint.
  </verify>
  <done>docs/gemini-cli-setup.md documents Gemini CLI HTTP config with httpUrl, verification via /mcp command, and pipeline test prompt. docs/antigravity-setup.md documents Antigravity HTTP config with serverUrl, verification via MCP Servers panel, and pipeline test prompt.</done>
</task>

</tasks>

<verification>
All four documentation files exist in `docs/` directory:
```bash
ls -la docs/http-transport.md docs/claude-code-setup.md docs/gemini-cli-setup.md docs/antigravity-setup.md
```
Each file contains the correct transport key for its platform:
- http-transport.md: --transport http, --port, --host, /mcp
- claude-code-setup.md: .mcp.json, stdio
- gemini-cli-setup.md: httpUrl
- antigravity-setup.md: serverUrl
</verification>

<success_criteria>
Four markdown files in docs/ providing complete, self-contained setup guides. Each guide includes prerequisites, configuration (with exact config snippets), verification steps, and troubleshooting. A user following any guide can set up the platform without external references.
</success_criteria>

<output>
After completion, create `.planning/phases/04-cross-platform-verification/04-01-SUMMARY.md`
</output>
